!function(){var t=function(){var t=navigator.userAgent;return!!(t.match(/AppleWebKit.*Mobile/)||t.match(/Windows Phone/)||t.match(/Android/)||t.match(/MQQBrowser/)||screen.availWidth<500)}();!function(){var t=["webkit","moz"],n=!window.requestAnimationFrame,i=0;n?t.forEach(function(n,e){window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}):(window.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)},window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var n=function(t){if(void 0===t)return"undefined";if(null===t)return"null";var n=typeof t;return"string"===n||"number"===n||"function"===n?n:(n=Object.prototype.toString.call(t),n.indexOf("rray")!==-1||n.indexOf("rguments")!==-1?"array":n.indexOf("ragment")!==-1?"fragment":n.indexOf("odeList")!==-1?"nodelist":n.indexOf("lement")!==-1?"node":n.indexOf("egExp")!==-1?"regexp":n.indexOf("bject")!==-1&&"object")},i=function(t,n){var i=null;for(i in n)t[i]=n[i];return t},e=function(t){return document.getElementById(t)},a=function(t){return t+"px"},o="mousedown",r="mousemove",s="mouseup",h="mouseleave";t&&(o="touchstart",r="touchmove",s="touchend",h="touchcancel");var l=function(n,i){var e,a,o=null;return o="touches"in n?"touches":"changedTouches",t?void 0!==i?(e=n[o][i].clientX,a=n[o][i].clientY):(e=n[o][0].clientX,a=n[o][0].clientY):(e=n.clientX,a=n.clientY),{x:e,y:a}},c="transform";void 0!==typeof document.createElement("div").style.webkitTransform&&(c="webkitTransform");var u=function(t,n,i){var e=t.x,a=t.y,o=t.radius,r=0,s=0;return!(e+o<r||e-o>r+n||a+o<s||a-o>s+i)},f=function(t,n,i,e){var a=Math.sin(i),o=Math.cos(i),r=t.x-n.x,s=t.y-n.y,h=r*o+s*a,l=s*o-r*a,c=newVy=null;l>-t.radius&&t.x<n.x2+n.x&&t.x>n.x&&(c=t.vx*o+t.vy*a,newVy=t.vy*o-t.vx*a,l=-t.radius,newVy*=e,r=h*o-l*a,s=l*o+h*a,t.vx=c*o-newVy*a,t.vy=newVy*o+c*a,t.x=n.x+r,t.y=n.y+s)},d=function(t,n,i,e){return"rgba("+t+","+n+","+i+","+e+")"},v=function(t,i){var e=function(t,n){var i=n;return t.indexOf(".")!==-1?(t.split(".").forEach(function(t){i[t]&&(i=i[t])}),i):i[t]};i=i?i:window,v=null;var a=function(n,i){var e=n.split("."),a=e.length;if(1===a)t[n]=i;else{for(var o,r=0,s=null;r<a-1;r+=1){if(s=t[e[r]],o=typeof s,["undefined","object"].indexOf(o)===-1)return!1;"undefined"===o&&(s=t[e[r]]={})}t[e[r]]=i}},o=function(i){var a=[];return i&&("array"===n(i)?i.forEach(function(n){a.push(e(n,t))}):a.push(e(i,t))),a};i.module=function(t,n){return!!t&&void t.apply(null,[a].concat(o(n)))},i.task=function(t,n){return!!t&&void t.apply(null,o(n))}};v(window),module(function(t,n){var i=function(t,n,i,e){var a={down:!1,startX:0,startY:0,moveX:0,moveY:0};t.addEventListener(o,function(t){a.down=!0;var i=l(t),e=i.x,o=i.y;a.startX=e,a.startY=o,n(a)},!1),t.addEventListener(r,function(t){if(t.preventDefault(),t.stopPropagation(),a.down===!0){var n=l(t),e=n.x,o=n.y;a.moveX=e,a.moveY=o,i(a)}}),t.addEventListener(s,function(t){a.down===!0&&(a.down=!1,e(a))})};t("slider",i)},["size"]),module(function(t){function n(t,n,i,e){this.x=t,this.y=n,this.x1=this.y1=0,this.x2=void 0===i?0:i,this.y2=void 0===e?0:e,this.rotation=0,this.scaleX=1,this.scaleY=1,this.lineWidth=1}n.prototype={draw:function(t,n,i){var e=this.x,a=this.y;void 0!==n&&(this.x2=n-e),void 0!==i&&(this.y2=i-a),this.x2<0||(t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.scale(this.scaleX,this.scaleY),t.lineWidth=this.lineWidth,t.beginPath(),t.strokeStyle="rgb(180,180,180)",t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2),t.closePath(),t.stroke(),t.restore())},getDeg:function(){return Math.atan2(this.y2-this.y1,this.x2-this.x1)}},t("line",n)}),module(function(t){function n(t,n){void 0===t&&(t=40),void 0===n&&(n="#ff0000"),this.x=0,this.y=0,this.radius=t,this.vx=0,this.vy=0,this.mass=1,this.rotation=0,this.scale=1,this.lineWidth=0,this.visible=!0}n.prototype={constructor:n,draw:function(t){var n=this.scale;t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.scale(n,n);var i=n+.2;i>1?i=1:i,t.fillStyle=d(200,10,10,i),t.lineWidth=this.lineWidth,t.beginPath(),t.arc(0,0,this.radius,0,2*Math.PI,!0),t.closePath(),t.fill(),this.lineWidth>0&&t.stroke(),t.restore()}},t("ball",n)}),module(function(t,n){var i=function(){this.x=0,this.y=0,this.xpos=0,this.ypos=0,this.zpos=0,this.scaleX=1,this.scaleY=1,this.color="#ffffff",this.alpha=1,this.lineWidth=1,this.branch=[],this.branch[0]=-320-20*Math.random(),this.branch[1]=-30-30*Math.random(),this.branch[2]=80*Math.random()-40,this.branch[3]=-100-40*Math.random(),this.branch[4]=-60-40*Math.random(),this.branch[5]=60*Math.random()-30,this.branch[6]=-110-20*Math.random();var t=this.ball=new n;t.tree=this,this.ballRadius=.2+.6*Math.random()};i.prototype.draw=function(t){var i=this.scaleX,e=!1,a=this.ball;t.save(),t.translate(this.x,this.y),t.scale(i,i),t.lineWidth=this.lineWidth,t.strokeStyle="rgba(0,0,0,"+(i+.5)+")",t.beginPath(),t.moveTo(0,0),t.lineTo(0,this.branch[0]),t.moveTo(0,this.branch[1]),t.lineTo(this.branch[2],this.branch[3]),t.moveTo(0,this.branch[4]);var o=this.branch[5],r=this.branch[6];return t.lineTo(o,r),t.stroke(),i<=this.ballRadius?(null===this.ball&&(a=this.ball=new n,a.tree=this,e=!0),a.x=o,a.y=r,a.scale=i,a.oriX=this.x+o*i,a.oriY=this.y+r*i,a.draw(t),a.visible=!0):a&&(a.visible=!1),t.restore(),{new:e,ball:a}},t("tree",i)},["ball"]),module(function(t,n,i){var e=[],a=[],o=[],r=[],s=function(t,i,s,h){for(var l=0,c=null,d=0,v=.98,m=s/2,y=h/2.8,w=y,x=260;l<i;l+=1)c=new n,c.xpos=2e3*Math.random()-1e3,c.ypos=w,c.zpos=1e4*Math.random(),e.push(c),a.push(c.ball);var p=function(t){t.zpos+=d,t.zpos<-x&&(t.zpos+=1e4),t.zpos>1e4-x&&(t.zpos-=1e4);var n=x/(x+t.zpos);t.scaleX=t.scaleY=n,t.x=m+t.xpos*n,t.y=y+t.ypos*n},b=function(t,n){return n.zpos-t.zpos},g=function(n){var i=n.draw(t);i.ball;i.new===!0&&a.push(i.ball)},X=function(t,n){if(t.visible!==!0){var i=t.scale,e=t.tree;if(t.x=t.oriX,t.y=t.oriY,t.tree=null,e.ball=null,a.splice(n,1),!(i>.76)){t.radius=t.radius*i*i,t.scale=1;var r=t.x/s*3;t.vx=t.x>s/2?-r:r,t.vy=10*-(t.y/h),o.push(t)}}},Y=function(t,n,i){var e=t.vx,a=t.vy+=.1;t.x+=e,t.y+=a,r.forEach(function(n){f(t,n,n.getDeg(),.5)});var l=u(t,s,h);l===!1?o.splice(n,1):t.draw(i)};!function n(){requestAnimationFrame(n),t.clearRect(0,0,s,h),e.forEach(p),d*=v,e.sort(b),e.forEach(g);for(var i=a.length,r=i-1;r>=0;r-=1)X(a[r],r);for(var l=o.length,r=l-1;r>=0;r-=1)Y(o[r],r,t);d-=.1}()},h=function(t,n,i,e,a,o){if(t.clearRect(0,0,i,e),n){var s=r.indexOf(n);if(s===-1)return}r.forEach(function(i,e){n&&i===n?i.draw(t,a,o):i.draw(t)})},l=function(t,n){return{start:function(t,n){var e=this.line=new i(t,n);r.push(e)},draw:function(i,e,a){var o=this.line;h(i,o,t,n,e,a)},clear:function(i){var e=this.line,a=r.indexOf(e);r.splice(a,1),h(i,null,t,n)}}};t("game",{drawLine:l,begin:s})},["tree","line"]),module(function(n){var i,e,a,o;t?(i=document.documentElement.clientWidth,e=document.documentElement.clientHeight,a=o=0):(i=600,e=600),n("size",{width:i,height:e})}),module(function(t){}),module(function(t){var n=function(t,n,o,r){var s=e(t).style,h=r.width,l=r.height;i(s,{width:a(h),height:a(l),marginLeft:a(-h/2),marginTop:a(-l/2)}),i(e(n),{width:h,height:l}),i(e(o),{width:h,height:l})};t("page",{layout:n})},["size"]),task(function(t,n,i,a){n.layout("article","canvas","canvasBall",t);var o=e("canvas").getContext("2d"),r=e("canvasBall").getContext("2d"),s=t.width,h=t.height;i.begin(o,200,s,h);var l=i.drawLine;a(document.body,function(t){var n=t.focus=l(s,h),i=e("article"),a=i.offsetLeft,o=i.offsetTop;t.offsetX=a,t.offsetY=o;var r=t.startX,c=t.startY;n.start(r-a,c-o)},function(t){var n=t.focus,i=t.offsetX,e=t.offsetY,a=t.moveX,o=t.moveY;n.draw(r,a-i,o-e)},function(t){var n=t.focus;t.focus=null,n.clear(r)})},["size","page","game","slider"])}();