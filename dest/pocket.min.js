!function(e){if(e){var t=function(e){if(void 0===e)return"undefined";if(null===e)return"null";var t=typeof e;return"string"===t||"number"===t||"function"===t?t:(t=Object.prototype.toString.call(e),t.indexOf("rray")!==-1||t.indexOf("rguments")!==-1?"array":t.indexOf("ragment")!==-1?"fragment":t.indexOf("odeList")!==-1?"nodelist":t.indexOf("lement")!==-1?"node":t.indexOf("egExp")!==-1?"regexp":t.indexOf("bject")!==-1&&"object")},r=function(e){var t=!0;for(var r in e)t=!1;return t},n=function(e,t){var r=null;for(r in t)r in e||(e[r]=t[r]);return e},a=function(e,t){var r=null;for(r in t)e[r]=t[r];return e},i=function(e,t){var r=function(){},n=null;return r.prototype=e,n=new r,t&&a(n,t),n},o=function(e,t,n,a){if(".NUMBER"===e)return n;if(["number","string"].indexOf(typeof t)!==-1)return t;var i=e.split("."),o=i.length,l="",f=0;if("JRootScope"===i[0]){i.shift(),o=i.length;for(var u;t&&!r(t)&&(u=Object.getPrototypeOf(t),!r(u));)t=u}for(var s=t,c=null;s&&!r(s);){for(f=0,t=s;f<o;f+=1){if(l=i[f],!t.hasOwnProperty(l)){t=null;break}if(t=t[l],void 0===t)break}if(t){c=t;break}s=Object.getPrototypeOf(s)}return c=!!c&&c},l=function(e){var t=e.toString(),r=t.indexOf("("),n=t.indexOf(")");return t=t.slice(r+1,n),t.split(",")},f=function(e){for(var t=e.split(" "),r=t.length,n=r-1;n>=0;n-=1)t[n]||t.splice(n,1);return t},u=function(e,t){var r=e.childNodes,n=0,a=r.length,i=null;if(0===a)return void 0===t?e.innerHTML:(e.innerHTML=t,t);for(;n<a;n+=1)if(i=r[n],3===i.nodeType)return void 0===t?i.nodeValue:(i.nodeValue=t,t);return""},s=function(e){return+e.slice(0,-2)},c=function(e){return[void 0,null,!1].indexOf(e)===-1},p=function(e,t,r){var n=e.split(","),a=null;n.forEach(function(e,n){a=t[e],e in t||(a=t[e]=[]),a.push(r)})},d={},v=function(e,t){var r={url:e,aim:t};this.usePrivate=function(e,t){return void 0===t?r[e]:void(r[e]=t)}},h={constructor:v},m={upper:function(e){return e.toUpperCase()},lower:function(e){return e.toLowerCase()},length:function(e){return"array"!==t(e)?e:e.length},safe:function(e){if("string"==typeof e)return safeHtml(e)},toString:function(e){return e.toString()}},y={filters:m};v.setFilter=function(e){a(m,e)},n(h,y);var x=function(){var e=function(e){var t=e.lastIndexOf("/");if(t===-1)return{dirname:"",basename:e};var r=e.slice(0,t+1),n=e.slice(t+1);return{dirname:r,basename:n}},t=function(e,t){var r,n=t.split("/"),a=n.length,i=0,o=null,l="",f=e.indexOf("?"),u=e.indexOf("#");f=f===-1?Number.POSITIVE_INFINITY:f,u=u===-1?Number.POSITIVE_INFINITY:u,r=Math.min(f,u),r!==-1&&(l=e.slice(r),e=e.slice(0,r));for(var s=e.split("/");i<a;i+=1)o=n[i],".."===o?s.pop():o&&"."!==o&&s.push(o);return s=s.join("/")+l};return{join:t,split:e}}(),g=function(e,t,r){var n;e.lastIndex=0;for(var a=[],i=0,o=0,l="";n=e.exec(t);)i=1,a.push({type:!0,html:t.slice(o,n.index)}),l=n[1],l=l.replace(/\s+/g,function(){return""}),a.push({type:!1,url:l,jsFilter:n[3]}),o=e.lastIndex;return 0!==i&&(a.push({type:!0,html:t.slice(o)}),e.lastIndex=0,a)},b=function(e){var t,r,n=/^[\n\s\r]+/,a=/[\n\s\r]+$/,i=n.exec(e),o=a.exec(e);return i||o?(i&&(t=i[0].length),o&&(r=o[0].length),t&&(e=e.slice(t)),r&&(e=e.slice(0,-r)),e):e},_=function(e){var t,r=e.html,n=e.url,a=e.callback,i=e.jsonp,o=/\'?\@include\(([\w\.\-\/\s]+)((\|[\w\-]+(\:[\w\-]+)*)*)\)[\;]*\'?/g;t=r?{type:!1,html:r}:{type:!1,url:n,baseUrl:""};var l=[t],f=[],u=function(e,t,r){function n(){for(var n="",i=0,o=e.length;i<o;i+=1){if(e[i].type===!1)return;n+=e[i].html}t.type=!0,t.html=n,void 0===r?a(t):r()}var l=t.baseUrl,s=0,c="",p=null;e.forEach(function(e,t){if(e.type===!1)if(p=e.url=x.join(l,e.url),e.baseUrl=x.split(p).dirname,p){if(f.indexOf(p)!==-1)return console.warn("模版循环引用"),e.html="",void(e.type=!0);if(p in d){var r=d[p],v=g(o,r);v?(f.push(p),u(v,e,n)):(e.type=!0,e.html=r,n())}else{var h={url:p};i===!0&&(h.dataType="jsonp"),$.ajax(h).done(function(t){t=b(t);var r=g(o,t);r?(f.push(p),u(r,e,n)):(e.type=!0,e.html=t,n(e.jsFilter))}).fail(function(){console.log("read "+p+" wrong"),a({html:""})})}s=1}else v=g(o,e.html),v?(u(v,t,n),s=1):(e.type=!0,c+=e.html);else c+=e.html}),0===s&&("object"==typeof t&&(t.type=!0,t.html=c),void 0===r?a(t):r())};u(l,t)},O={setTemplate:function(e,t){"string"==typeof e&&this.usePrivate("url",e),"jsonp"===t&&(this.jsonp=!0)},setHtml:function(e){"string"==typeof e&&this.usePrivate("template",e)},setContainer:function(e){"string"==typeof e&&this.usePrivate("aim",e)},_sendData:function(e){var t=this;return function(r){"object"==typeof e&&r?e.data=r:e={data:r},t.render(e,t)}},useData:function(e){var t=this;if("function"!=typeof e)return t;var r=function(){};r.prototype=t;var n=new r;return n._cbData=!0,setTimeout(function(){var t=n.lazyData;n._cbData=!1,n.lazyData,e(n._sendData(t)),delete n.lazyData,delete n._cbData},0),n},setCallback:function(e){var t=this;return t.loaded!==!0&&(["function","object"].indexOf(typeof e)!==-1&&(t.callback=e),t)},render:function(e,t){var r=this;if(r._cbData===!0)return r.lazyData=e,r;var n,a,i,o,l,f,u,s,c,p;if(e&&(n=e.aim,a=e.attrs,i=e.data,o=e.template,l=e.url,f=e.cache,u=e.callback,s=e.record,c=e.insert,p=e.jsonp),"function"==typeof u&&(r.callback=u),o=o?o:r.usePrivate("template"),l=l?l:r.usePrivate("url"),n=n?n:r.usePrivate("aim"),!(t&&"render"in t)){var v=function(){};v.prototype=r,t=new v}void 0===s&&(s=!0),t.storeExp={},t.storeExpItem=0,t.refOb={},t.insertType=c,t.aim=n,t.record=s,t.loaded=!1,t.signItem=0,t.signStore={},t.aliasArray=[],t._exps=null,void 0===p&&(p=r.jsonp),void 0!==a&&(t.attrs=a),l&&l in d&&(o=d[l]);var h={template:o,data:i,callback:u};return setTimeout(function(){o?t._render(h,null,"render"):_({url:l,callback:function(e){var r=d[l]=e.html;h.template=r,t._render(h,null,"render")},jsonp:p},f)},0),t}};n(h,O);var j={sn:{item:0},keyword:"pocket_record_id",match:"?",regMatch:function(){var e=this.match;return new RegExp("\\"+e+"([\\w\\.\\-\\:\\|\\,\\#@\\s]+)\\"+e,"gm")},getMatchValue:function(e,t,r,n){var a,i=this,l=e.variable,f=e.filter,u=[],s=null,c=i.filters,p=l.indexOf(",");l=p!==-1?l.split(","):[l];var d,v;return l.forEach(function(e,a){v="",d=e.indexOf(":"),d!==-1&&(v=e.slice(d+1),e=e.slice(d));var i=o(e,t,r,n);i===!1&&(i=v),u.push(i)}),p===-1&&(u=u[0]),f?(a=u,f.forEach(function(e){s=c[e],"function"==typeof s&&(a=s.apply(null,[a,r,n]))}),a||0===a||(a="")):a=u,a}};n(h,j);var k=function(e,t,r){var n=null;switch(e!==!0&&"true"!==e||(e="true"),e!==!1&&"false"!==e||(e="false"),r!==!0&&"true"!==r||(r="true"),r!==!1&&"false"!==r||(r="false"),"=="!==t&&"="!==t||(t="="),"!="!==t&&"!=="!==t||(t="!"),isNaN(+e)||(e=+e),isNaN(+r)||(r=+r),t){case"<":n=e<r;break;case">":n=e>r;break;case">=":n=e>=r;break;case"<=":n=e<=r;break;case"=":n=e===r;break;case"!":n=e!==r}return n},E=function(e){var t,r,n,a,i="|",o=e.indexOf(i),l=(e.length,null);o!==-1?(t=e.slice(0,o),r=e.slice(o+1),a=r.indexOf("@"),a!==-1&&(n=r.slice(a+1),r=r.slice(0,a)),r&&(l=r.split(","))):(a=e.indexOf("@"),a!==-1&&(n=e.slice(a+1),e=e.slice(0,a)),t=e);var f=t.split(",")[0].split(":")[0];return{filter:l,variable:t,firstAttr:f,alias:n}},I=function(e,t){var r,n=e.slice(0,e.indexOf(" ")),a=null,i=null;return"for"===n?(i=new RegExp("for\\s+([\\w|\\|\\-]+)\\s+in\\s+(\\"+t+'?[\\{\\}\\w|\\|\\.\\[\\]\\,\\"\\:]+\\'+t+"?)\\s*"),r=i.exec(e),a=[r[1],r[2]],a.type="for"):"if"===n?(i=new RegExp("if\\s+(\\"+t+"?[\\w|\\|\\.\\-]+\\"+t+"?)\\s+([\\<\\>\\=\\!]+[\\<\\>\\=\\!]*)\\s+(\\"+t+"?[\\w\\|\\.\\-]+\\"+t+"?)"),r=i.exec(e),a=[r[1],r[2],r[3]],a.type="if"):"copy"===n?(i=/copy\s+([\w\-]+)/,r=i.exec(e),a=[r[1]],a.type="copy"):"scope"===n&&(i=new RegExp("scope\\s+([\\w|\\|\\-]+)\\s+as\\s+(\\"+t+'?[\\{\\}\\w|\\|\\.\\[\\]\\,\\"\\:]+\\'+t+"?)\\s*"),r=i.exec(e),a=[r[1],r[2]],a.type="scope"),a},w={handExpress:function(e,t,r,n){var a=this,i=E(e),o=a.match;r||(r=0),n||(n=1);var l,f=i.filter,u=i.variable,s=a.storeExp,c=a.refOb;if(!f||"EXPRESS"!==f[0]){if(u.indexOf("REF")!==-1){ref=u.slice(3),ref=ref?ref:"OTHER";var p="";a.keyword;return ref in c||(p=a.sn.item+=1,c[ref]=p),'data-xjref="'+ref+'"'}l=a.getMatchValue(i,t,r,n),"object"==typeof l&&(l=l.toString());var d={value:l,attr:i.firstAttr,alias:i.alias};return d[a.keySign]=!0,d}var v=s[u],h=I(v.express,o);if("for"===h.type){var m=h[1],y=h[0];if(m[0]===o){m=m.slice(1,-1);var x=E(m);l=a.getMatchValue(x,t,r,n),l||(l="")}else try{l=JSON.parse(m)}catch(e){l=""}return"object"!=typeof l?"":{data:l,template:v.html,prefix:y,lastData:t}}if("if"===h.type){var g=h[0],b=h[2],_=a.regMatch().exec(g),O=a.regMatch().exec(b);_&&(g=_[1],g=a.getMatchValue(E(g),t,r,n)),O&&(b=O[1],b=a.getMatchValue(E(b),t,r,n));var j=k(g,h[1],b);return j?{data:t,template:v.html}:""}if("scope"===h.type){var w=h[1],S=h[0];if(w[0]===o){w=w.slice(1,-1);var M=E(w);l=a.getMatchValue(M,t,r,n),l||(l="")}else try{l=JSON.parse(w)}catch(e){l=""}var T={};return T[S]=l,{data:T,template:v.html,lastData:t}}}};n(h,w);var S=function(e,t){var r,n=new RegExp("\\{\\{(\\w+)(?=\\s)(\\"+t+'|\\{\\"|\\}|[\\:\\"\\,\\w\\s\\>\\<\\=\\|\\.\\!\\[\\]])+\\}\\}'),a=null,i=0,o="",l="",f=null,u="",s=[],c=[];f=n.exec(e);try{f=n.exec(e)}catch(e){return void console.log("loop write error")}var p="";do{if(0===i){if(!f)return!1;f=f[1],r=new RegExp("\\{\\{"+f+"\\s+(\\"+t+'|\\{\\"|\\}|[\\:\\[\\]\\,\\"\\w\\s\\>\\<\\!\\=\\|\\.])+\\}\\}|(\\{\\{\\/'+f+"s*\\}\\})","g"),a=r.exec(e),o=[a.index,r.lastIndex]}else a=r.exec(e);a[2]?i-=1:i+=1,0===i&&(l=[a.index,r.lastIndex],p=e.slice(0,o[0]),c=[{html:p},{html:e.slice(o[1],l[0]),express:e.slice(o[0]+2,o[1]-2)}],e=u=e.slice(l[1]),f=n.exec(u),s=s.concat(c))}while(a&&f);return s.push({html:u}),s},M={keySign:function(){var e=(100*Math.random()).toFixed(0);return"pocket_var"+e}(),_toSignString:function(e,t,r){var n=this,a=n.keySign,i=n.signItem+=1;return i=i.toString(),n.signStore[i]={attr:e,value:t,alias:r},"#"+a+i+a+"#"},stringEachArr:function(e,t,r,n){for(var a,i=this,o=i.regMatch(),l=null,f="",u="",s=0,c=0,p="",d="";l=o.exec(e);)f=l[1],s=l.index,d=e.slice(c,s),u+=d,p+=d,a=i.handleStr(f,t,r,n),"object"!=typeof a?(u+=a,p+=a):"copyHtml"in a?(u+=a.html,p+=a.copyHtml):(u+=a.value,p+=i._toSignString(a.attr,a.value,a.alias)),c=o.lastIndex;return d=e.slice(c),u+=d,p+=d,{html:u,copyHtml:p}},handleStr:function(e,t,r,n){var a=this,i=a.handExpress(e,t,r,n),o=a.keySign;return["number","string"].indexOf(typeof i)!==-1?i:i[o]===!0?i:a._render(i,"middle")},_render:function(e,r){var n,a=e.template,o=e.data,l=e.prefix,f=this,u=this.match,s=S(a,u),c=e.callback,p=e.lastData,d="",v=null,h=null;if("array"===t(s))for(var m=0,y=s.length,h=null,x="";m<y;m+=1)h=s[m],h.express?(n=f.storeExpItem+=1,x="XJ"+n,f.storeExp[x]=h,d+=u+x+"|EXPRESS"+u):d+=h.html;else s===!1&&(d=a);var g=null,b=t(o);h=null;var y,_="",O="",m=0;if("array"===b&&null===r)for(m=0,y=o.length;m<y;m+=1)h=o[m],"object"==typeof h&&(h.NUMBER=m.toString()),v=h,p&&(v=i(p,v)),g=f.stringEachArr(d,v,m,y),_+=g.html,O+=g.copyHtml;else if("array"===b&&l)for(m=0,y=o.length;m<y;m+=1)h=o[m],"object"==typeof h&&(h.NUMBER=m.toString()),v={},v[l]=h,p&&(v=i(p,v)),g=f.stringEachArr(d,v,m,y),_+=g.html,O+=g.copyHtml;else if("object"===b&&l){var j="";for(j in o)h=o[j],h={value:h,attr:j},v={},v[l]=h,p&&(v=i(p,v)),g=f.stringEachArr(d,v),_+=g.html,O+=g.copyHtml}else p&&(o=i(p,o)),g=f.stringEachArr(d,o,0,1),_=g.html,O=g.copyHtml;var k={html:_,copyHtml:O};return r||f._handleDom(k,c),k}};n(h,M);var T=function(e,t,r){var n=null,a=null,i=null;if(!e)return!1;for(n in e)n in t&&(a=e[n],i=l(a),i.forEach(function(e,r){0===r?i[r]=t[n]:e in t?i[r]=t[e]:i[r]=null}),a.apply(r,i))},R=function(e,t,r,n,a,i,o){var l=t[n];n in t&&"object"==typeof t[n]||(l=t[n]=[],l._pocket_id=a);var f=e.attr,u=e.value,s=e.alias;f=f?f:"__default";var c={};c.type="textContent",c.value=u,c.attr=f,c.identity=a.toString()+i,c.domId=a,c.ref=n,void 0!==o&&(c.domItem=o),s&&(c.alias=s,p(s,r,c)),l.push(c)},D=function(e,t,r,n,a,i,o,l){var f=t[n];n in t&&"object"==typeof t[n]||(f=t[n]=[],f._pocket_id=i);var u=e.attr,s=e.value,c=e.alias;u=u?u:"__default";var d={};d.value=s,d.type="class",d.classItem=a,d.attr=u,d.identity=i.toString()+o,d.domId=i,d.ref=n,void 0!==l&&(d.domItem=l),c&&(d.alias=c,p(c,r,d)),f.push(d)},P=function(e,t,r,n,a,i,o,l){var f=t[n];n in t&&"object"==typeof t[n]||(f=t[n]=[],f._pocket_id=i);var u=e.attr,s=e.value,c=e.alias;u=u?u:"__default";var d={};d.value=s,d.type="style",d.style=a,d.attr=u,d.identity=i.toString()+o,d.domId=i,d.ref=n,void 0!==l&&(d.domItem=l),c&&(d.alias=c,p(c,r,d)),f.push(d)},A=function(e,t,r,n,a,i,o){var l=t[n];n in t&&"object"==typeof t[n]||(l=t[n]=[],l._pocket_id=a);var f=e.attr,u=e.value,s=e.alias;f=f?f:"__default";var c={};c.value=u,c.type="formValue",c.attr=f,c.identity=a.toString()+i,c.domId=a,c.ref=n,void 0!==o&&(c.domItem=o),s&&(c.alias=s,p(s,r,c)),l.push(c)},N=function(e,t,r,n,a,i,o){var l=t[n];n in t&&"object"==typeof t[n]||(l=t[n]=[],l._pocket_id=a);var f=e.attr,u=e.value,s=e.alias;f=f?f:"__default";var c={};c.value=u,c.type="pocketData",c.attr=f,c.identity=a.toString()+i,c.domId=a,c.ref=n,void 0!==o&&(c.domItem=o),s&&(c.alias=s,p(s,r,c)),l.push(c)},U=function(e,t,r,n,a,i,o,l){var s=new RegExp("\\#"+n+"(\\d+)"+n+"\\#","gm"),c=u(t[0]);if(c.trim())for(var p,d,v;p=s.exec(c);)d=p[1],v=r[d],R(v,i,o,e,a,d,l);var h=t[0].tagName;if(["INPUT","TEXTAREA"].indexOf(h)!==-1){var m;for(m="INPUT"===h?t.val():t.text();p=s.exec(m);)d=p[1],v=r[d],A(v,i,o,e,a,d,l)}for(var y=t.attr("pocket-data");p=s.exec(y);)d=p[1],v=r[d],N(v,i,o,e,a,d,l);var x=t.attr("class");x&&(x=f(x),x.forEach(function(t,n){for(s.lastIndex=0;p=s.exec(t);)d=p[1],v=r[d],D(v,i,o,e,n,a,d,l)}));var g=$("<div></div>");g.append(t.clone(!0));var b=/^\<[^\<\>]+style=[\'\"]?([\(\)\;\s\-\w\:\[\]\#]+)[\'\"]?[^\<\>]+\>/g.exec(g.html());b&&(b=b[1],b=b.split(";"),b.forEach(function(t,n){t=t.split(":");var f=t[0],u=t[1];for(s.lastIndex=0;p=s.exec(u);)d=p[1],v=r[d],P(v,i,o,e,f,a,d,l)}))},H=function(e,t,r,n,a,i,o){t.length>1?t.each(function(t,l){l=$(l),U(e,l,r,n,a,i,o,t)}):U(e,t,r,n,a,i,o)},V={_handleDom:function(e){var t=e.html,r=e.copyHtml,n=this,a=n.refOb,i=$(t),o=$("<div></div>");o.append(i);var l=$(r),f=null,u=null,s=null,c=n._beforeMount,p=n._afterMount,d=n.record,v=n.keyword,h={},m=n.aim,y=n.insertType;for(u in a)a.hasOwnProperty(u)&&(s=a[u],f=o.find("[data-xjref="+u+"]"),f[0].hasAttribute("pocket-data")&&f.removeAttr("pocket-data"),h[u]=f,f.removeAttr("data-xjref"),f.attr("data-"+v,s));"string"==typeof m&&(m=$(m)),c&&T(c,h,n);var x=n.callback,g=typeof x;if("function"===g?x(i):"object"===g&&"function"==typeof x.beforeMount&&x.beforeMount(i),delete n.callback,"append"===y?m.append(i):"prepend"===y?m.prepend(i):m.html("").append(i),p&&T(p,h,n),d===!0){var b=$("<div></div>");b.append(l);var _=n.signStore,O=n.keySign,j={},k={};for(u in a)if(a.hasOwnProperty(u)){s=a[u],j[u]=s;var E=b.find("[data-xjref="+u+"]");H(u,E,_,O,s,j,k)}n.updateObject=j,n.syncData=k;var I=Object.getPrototypeOf(n),w=I._exps;"_exps"in I||(w=I._exps=[]),w.push(n)}"object"===g&&"function"==typeof x.afterMount&&x.afterMount(i),n.loaded=!0,delete n.storeExp,delete n.refOb,delete n.insertType,delete n.aim,delete n.record,delete n.signStore,delete n.signItem,delete n.aliasArray,delete n.storeExpItem;var S=n.loadTast;S&&S.length>0&&S.forEach(function(e,t){n._update.apply(n,e)});var M=n.removeTask;M&&M.length>0&&M.forEach(function(e,t){n.remove(e)}),delete n.loadTast,delete n.removeTask}};n(h,V);var C={beforeMount:function(e){"object"===t(e)&&(this._beforeMount?a(this._beforeMount,e):this._beforeMount=e)},afterMount:function(e){"object"===t(e)&&(this._afterMount?a(this._afterMount,e):this._afterMount=e)},beforeUpdate:function(e){"object"===t(e)&&(this._beforeUpdate?a(this._beforeUpdate,e):this._beforeUpdate=e)},beforeRemove:function(e){"object"===t(e)&&(this._beforeRemove?a(this._beforeRemove,e):this._beforeRemove=e)},bind:function(e){if(e.loaded!==!0)return!1;var r=this,n=r._exps;"array"===t(n)&&n.push(e)},noBind:function(){var e,t=this,r=Object.getPrototypeOf(t),n=r._exps;n&&(e=n.indexOf(t))!==-1&&n.splice(e,1)},clear:function(){var e=this,t=Object.getPrototypeOf(e);t._exps;t._exps&&delete t._exps},_removeRefInfo:function(e){var t=this,r=t.syncData,n=t.updateObject,a=null,i=[];for(var o in r)i.push(o);for(var l,f=i.length,u=f-1;u>=0;u-=1)l=i[u],a=r[l],a.ref===e&&delete r[l];delete n[e]},_afterRemove:function(e,t){var r=this;return function(){r._removeRefInfo(t),e.remove()}},removeAll:function(e,t){var r=this,n=r._exps;return!!n&&void n.forEach(function(r,n){r.remove(e,t)})},remove:function(e,t){var r=this;if(!e)return!1;if(r.loaded!==!0){var n=r.removeTask;"removeTask"in r||(n=r.removeTask=[]),n.push(e)}else{var a=r.updateObject,i=a[e];if(!i)return!1;var o,l=r.keyword;o="object"==typeof i?i._pocket_id:i;var f=$("[data-"+l+"="+o+"]");if(0===f.length)return r._removeRefInfo(e),!1;r.syncData;if("function"!=typeof t){var u=r._beforeRemove;u&&e in u&&(t=u[e])}"function"==typeof t?t.call(r,f,r._afterRemove(f,e)):r._afterRemove(f,e)()}},updateAll:function(e){var t=this,r=t._exps;return!!r&&void r.forEach(function(t,r){t.update(e)})},update:function(e){var t=this,r=t.loaded,n=e.ref,a=e.value,i=e.sync,o=e.attr,l=e.beforeUpdate;if(r!==!0){var f=t.loadTast;t.loadTast||(f=t.loadTast=[]),f.push([n,o,a,i,l])}else t._update(n,o,a,i,l)}};n(h,C);var F=function(e,t,r){var n=!1;return t.indexOf("px")!==-1&&(n=!0,t=s(t)),r.indexOf("px")!==-1&&(n=!0,r=s(r)),n===!0?+t===+r:t===r},z={_syncData:function(e,t,r,n){var a=this,i=a.syncData,o=this.keyword,l=i[e];l&&l.forEach(function(e,i){var l=e.identity;l!==t&&a._runAna(e,r,$("[data-"+o+"="+e.domId+"]"),null,null,n)})},_updateCb:function(e,t,r){var n=this;return function(a){var i=e.alias,o=e.identity,l=e.type;if("textContent"===l){if(c(a)){u(t[0],a);e.value=a}}else if("class"===l){if(c(a)){var s=f(t.attr("class")),p=s.length,d=e.classItem,v=s[d];v!==a&&(t.removeClass(v).addClass(a),e.classItem=p-1,e.value=a)}}else if("style"===l){if(c(a)){var h=e.style,m=t.css(h);F(h,m,a)||(t.css(h,a),e.value=a)}}else if("formValue"===l){var y=t.val();c(a)&&a.toString()!==y.toString()?(t.val(a),e.value=a):e.value=y}else"pocketData"===l&&e.value!==a&&(e.value=a);r===!0&&i&&(i.indexOf(",")===-1?n._syncData(i,o,e.value,t):(i=i.split(","),i.forEach(function(r){n._syncData(r,o,e.value,t)})))}},_runAna:function(e,t,r,n,a,i){var o=this,l=e.value,f=e.domItem,u=e.attr;"number"==typeof f&&(r=r.eq(f));var s=o._beforeUpdate;"function"!=typeof a&&"object"==typeof s&&(a=s[e.ref+"?"+u]);var c={lastValue:l,value:t,trigger:i,current:r};"function"==typeof a?a.call(o,c,o._updateCb(e,r,n)):o._updateCb(e,r,n)(t)},_update:function(e,t,r,n,a){var i=this,o=i.syncData,l=i.updateObject;if(!o)return!1;var f=l[e];if(!f)return!1;var u=i.keyword,s=f._pocket_id,c=$("[data-"+u+"="+s+"]");return 0===c.length?(i._removeRefInfo(e),!1):void f.forEach(function(e,o){e.attr===t&&i._runAna(e,r,c,n,a)})}};n(h,z),v.prototype=h,"function"==typeof define&&define.amd&&define("pocket",[],function(){return v}),e.Pocket=v}}("undefined"!=typeof window?window:null);